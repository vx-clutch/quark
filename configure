#!/bin/sh

# TODO:
#   - checks for needed binaries
#   - create config.mak based on dist/config.mak

usage() {
cat <<EOF
Usage: $0 [OPTION]... [VAR=VALUE]...

To assign environment variables (e.g., CC, CFLAGS...), specify them as
VAR=VALUE.

  CC      C compiler command [detected]
  CFLAGS  C compiler flags [-g, ...]

EOF
exit 0
}

if [ "$1" == "help" ]; then
usage
fi

prefix=/usr/local/quark
exec_prefix=/usr/local
syslibdir=/lib

compilers=( "gcc" "clang" )
found="NULL"
for compiler in "${compilers[@]}"; do
printf "checking for %s..." "$compiler"
if command -v "$compiler" &> /dev/null; then
printf " %s\n" "$compiler"
found="$compiler"
break
else
printf " Not found\n"
fi
echo "No C compiler found, exiting"
exit 1
done
